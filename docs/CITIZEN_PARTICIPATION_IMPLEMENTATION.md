# ุณุณุชู ูุดุงุฑฺฉุช ุดูุฑููุฏ - ุฑุงูููุง ูพุงุฏูโุณุงุฒ
**Citizen Participation System - Implementation Guide**

ุชุงุฑุฎ: 2024
ูุถุนุช: โ ูพุงุฏูโุณุงุฒ ุจฺฉโุงูุฏ ู ูพูู ูุฏุฑุช ฺฉุงูู ุดุฏ

---

## ๐ ุฎูุงุตู ูพุงุฏูโุณุงุฒ

ุณุณุชู ูุดุงุฑฺฉุช ุดูุฑููุฏ ุจุง ููููุช ุจู ูพูู ูุงูุฒุฏ ุงุถุงูู ุดุฏ. ุงู ุณุณุชู ุงูฺฉุงู ุฏุฑุงูุช ุงุฏูโูุง ู ฺฏุฒุงุฑุด ูุดฺฉูุงุช ุงุฒ ุดูุฑููุฏุงูุ ุฑุงโฺฏุฑุ ูุธุฑุณูุฌุ ู ฺฏููฺฉุดู ุฑุง ูุฑุงูู ูโฺฉูุฏ.

### ูุถุนุช ูพุฑูฺู

#### โ ฺฉุงูู ุดุฏู
1. **ูุฏูโูุง ุฏุชุงุจุณ** (4 ูุฏู)
   - `CitizenContribution` - ุงุฏูโูุง ู ฺฏุฒุงุฑุดโูุง
   - `ContributionVote` - ุฑุงโุฏู
   - `ContributionComment` - ูุธุฑุงุช
   - `CitizenProfile` - ูพุฑููุงู ุดูุฑููุฏุงู ุจุง ฺฏููฺฉุดู

2. **ุฑูุชโูุง ูพูู ูุงูุฒุฏ** (9 ุฑูุช)
   - `/contributions` - ูุณุช ูุดุงุฑฺฉุชโูุง ุจุง ููุชุฑ
   - `/contributions/<id>` - ุฌุฒุฆุงุช ูุดุงุฑฺฉุช
   - `/contributions/<id>/approve` - ุชุงุฏ
   - `/contributions/<id>/reject` - ุฑุฏ
   - `/contributions/<id>/update-status` - ุชุบุฑ ูุถุนุช
   - `/contributions/<id>/respond` - ูพุงุณุฎ ูุฏุฑ
   - `/contributions/<id>/priority` - ุชุนู ุงูููุช
   - `/leaderboard` - ุฌุฏูู ุงูุชุงุฒุงุช

3. **ุชูุงุจุน ฺฉูฺฉ** (4 ุชุงุจุน)
   - `generate_tracking_code()` - ุชููุฏ ฺฉุฏ ูพฺฏุฑ
   - `award_points()` - ุงุนุทุง ุงูุชุงุฒ
   - `calculate_level()` - ูุญุงุณุจู ุณุทุญ
   - `check_and_award_badges()` - ุงุนุทุง ูุดุงูโูุง

4. **ูุงูุจโูุง HTML** (3 ูุงู)
   - `contributions.html` - ูุณุช ุจุง ููุชุฑ ู ุขูุงุฑ
   - `contribution_detail.html` - ุฌุฒุฆุงุช ฺฉุงูู ุจุง ููุดู
   - `leaderboard.html` - ุฌุฏูู ุงูุชุงุฒุงุช

5. **ููู ูุงูุจุฑ**
   - ุขุชู "ูุดุงุฑฺฉุช ุดูุฑููุฏ" ุจู ููู ุฏุงุดุจูุฑุฏ ุงุถุงูู ุดุฏ

#### โณ ุฏุฑ ุงูุชุธุงุฑ ูพุงุฏูโุณุงุฒ
1. **ุฏุณุชูุฑุงุช ุฑุจุงุช ุชูฺฏุฑุงู** (ุงูููุช ุจุงูุง)
   - ุฏฺฉูู "๐ก ูุดุงุฑฺฉุช ูู" ุฏุฑ ููู ุงุตู
   - ูุฑู ุงุฑุณุงู ุงุฏู (Conversation Handler)
   - ูุฑู ฺฏุฒุงุฑุด ูุดฺฉู
   - ูุงุณุท ุฑุงโุฏู
   - ูุงุณุท ูุธุฑุงุช
   - ูุณุช ูุดุงุฑฺฉุชโูุง ฺฉุงุฑุจุฑ
   - ุงุนูุงูโูุง (ุชุงุฏุ ุฑุฏุ ูพุงุณุฎ)

2. **ูฺฺฏโูุง ุงุถุงู** (ุงูููุช ูุชูุณุท)
   - ุขูพููุฏ ุชุตูุฑ ุฏุฑ ุฑุจุงุช
   - ุงุฑุณุงู ูููุนุช GPS
   - ููุชูฺฉุดู ุชุบุฑ ูุถุนุช
   - ุตูุญู ูพุฑููุงู ุดูุฑููุฏ ุฏุฑ ูพูู

---

## ๐๏ธ ุณุงุฎุชุงุฑ ุฏุชุงุจุณ

### ุฌุฏูู `citizen_contribution`

```sql
CREATE TABLE citizen_contribution (
    id INTEGER PRIMARY KEY,
    tracking_code VARCHAR(20) UNIQUE,      -- IDEA-#### ุง RPT-####
    candidate_id INTEGER,
    user_telegram_id BIGINT,
    user_username VARCHAR(100),
    user_first_name VARCHAR(100),
    user_last_name VARCHAR(100),
    user_phone VARCHAR(20),
    contribution_type VARCHAR(20),          -- idea ุง report
    title VARCHAR(200),
    description TEXT,
    category VARCHAR(50),                   -- 10 ุฏุณุชูโุจูุฏ
    location_text TEXT,
    latitude FLOAT,
    longitude FLOAT,
    images JSON,                            -- ุขุฑุงู ูุณุฑ ุชุตุงูุฑ
    status VARCHAR(20),                     -- 6 ูุถุนุช
    priority VARCHAR(20),                   -- low/medium/high/urgent
    votes_count INTEGER DEFAULT 0,
    comments_count INTEGER DEFAULT 0,
    views_count INTEGER DEFAULT 0,
    admin_response TEXT,
    response_date DATETIME,
    created_at DATETIME,
    updated_at DATETIME,
    reviewed_at DATETIME,
    completed_at DATETIME
);
```

**ุฏุณุชูโุจูุฏโูุง:**
- `education` - ๐ ุขููุฒุด
- `health` - ๐ฅ ุจูุฏุงุดุช
- `traffic` - ๐ ุชุฑุงูฺฉ
- `security` - ๐ก๏ธ ุงููุช
- `environment` - ๐ณ ูุญุท ุฒุณุช
- `cultural` - ๐ญ ูุฑููฺฏ
- `infrastructure` - ๐๏ธ ุฒุฑุณุงุฎุช
- `economic` - ๐ฐ ุงูุชุตุงุฏ
- `welfare` - ๐ค ุฑูุงู
- `other` - ๐ ุณุงุฑ

**ูุถุนุชโูุง:**
1. `pending` โณ - ุฏุฑ ุงูุชุธุงุฑ ุจุฑุฑุณ
2. `under_review` ๐ - ุฏุฑ ุญุงู ุจุฑุฑุณ
3. `approved` โ - ุชุงุฏ ุดุฏู
4. `in_progress` ๐ - ุฏุฑ ุญุงู ุงูุฌุงู
5. `completed` โ๏ธ - ุงูุฌุงู ุดุฏู
6. `rejected` โ - ุฑุฏ ุดุฏู

### ุฌุฏูู `contribution_vote`

```sql
CREATE TABLE contribution_vote (
    id INTEGER PRIMARY KEY,
    contribution_id INTEGER,
    user_telegram_id BIGINT,
    user_name VARCHAR(100),
    vote_type VARCHAR(10) DEFAULT 'up',    -- ูุนูุงู ููุท up
    voted_at DATETIME,
    UNIQUE(contribution_id, user_telegram_id)  -- ฺฉ ุฑุง ุจุฑุง ูุฑ ฺฉุงุฑุจุฑ
);
```

### ุฌุฏูู `contribution_comment`

```sql
CREATE TABLE contribution_comment (
    id INTEGER PRIMARY KEY,
    contribution_id INTEGER,
    user_telegram_id BIGINT,
    user_name VARCHAR(100),
    comment_text TEXT,
    parent_comment_id INTEGER,              -- ุจุฑุง ูพุงุณุฎ ุจู ูุธุฑ
    created_at DATETIME
);
```

### ุฌุฏูู `citizen_profile`

```sql
CREATE TABLE citizen_profile (
    telegram_id BIGINT PRIMARY KEY,
    full_name VARCHAR(100),
    username VARCHAR(100),
    phone VARCHAR(20),
    neighborhood VARCHAR(100),
    total_points INTEGER DEFAULT 0,
    level INTEGER DEFAULT 1,
    contributions_count INTEGER DEFAULT 0,
    votes_given INTEGER DEFAULT 0,
    comments_count INTEGER DEFAULT 0,
    badges JSON,                            -- ุขุฑุงู ูุดุงูโูุง
    joined_at DATETIME,
    last_active DATETIME
);
```

---

## ๐ฎ ุณุณุชู ฺฏููฺฉุดู

### ูุญูู ฺฉุณุจ ุงูุชุงุฒ

| ุนูู | ุงูุชุงุฒ |
|-----|--------|
| ุงุฑุณุงู ุงุฏู/ูุดฺฉู | 10 |
| ุฑุง ุฏุงุฏู | 1 |
| ุงุฑุณุงู ูุธุฑ | 2 |
| ุชุงุฏ ุงุฏู ุชูุณุท ูุงูุฒุฏ | 50 |
| ุงุฏู ุฏุฑ ุญุงู ุงูุฌุงู | 75 |
| ุงุฌุฑุง ฺฉุงูู ุงุฏู | 100 |

### ุณุทูุญ (Levels)

| ุณุทุญ | ุงูุชุงุฒ ูุงุฒู | ููุงุฏ |
|-----|------------|------|
| 1 | 0-49 | ๐ฑ |
| 2 | 50-149 | ๐ฟ |
| 3 | 150-299 | ๐ |
| 4 | 300-499 | ๐ณ |
| 5 | 500-999 | โญ |
| 6 | 1000-1999 | ๐ |
| 7 | 2000-4999 | ๐ซ |
| 8 | 5000-9999 | โจ |
| 9 | 10000+ | ๐ |

### ูุดุงูโูุง (Badges)

| ูุดุงู | ุดุฑุท | ููุงุฏ |
|------|-----|------|
| Beginner (ุชุงุฒูโูุงุฑุฏ) | ุซุจุชโูุงู | ๐ |
| Contributor (ูุดุงุฑฺฉุชโฺฉููุฏู) | 5 ูุดุงุฑฺฉุช | ๐ก |
| Active Voter (ุฑุงโุฏููุฏู ูุนุงู) | 20 ุฑุง | ๐ณ๏ธ |
| Discusser (ฺฏูุชฺฏูฺฏุฑ) | 10 ูุธุฑ | ๐ฌ |
| Star (ุณุชุงุฑู) | 500 ุงูุชุงุฒ | โญ |
| Champion (ููุฑูุงู) | 1000 ุงูุชุงุฒ | ๐ |

---

## ๐ API Endpoints

### ุฏุฑุงูุช ูุณุช ูุดุงุฑฺฉุชโูุง

```http
GET /contributions?status=all&category=all&sort=newest
```

**ูพุงุฑุงูุชุฑูุง:**
- `status`: all/pending/under_review/approved/in_progress/completed/rejected
- `category`: all/education/health/traffic/...
- `sort`: newest/popular/most_commented

**ูพุงุณุฎ:** ุตูุญู HTML ุจุง ูุณุช ูุดุงุฑฺฉุชโูุง

### ูุดุงูุฏู ุฌุฒุฆุงุช

```http
GET /contributions/<id>
```

**ูพุงุณุฎ:** ุตูุญู HTML ุจุง ุฌุฒุฆุงุช ฺฉุงูู + ูุธุฑุงุช

### ุชุงุฏ ูุดุงุฑฺฉุช

```http
POST /contributions/<id>/approve
```

**ุนููุงุช:**
- ุชุบุฑ ูุถุนุช ุจู `approved`
- ุงุนุทุง 50 ุงูุชุงุฒ ุจู ฺฉุงุฑุจุฑ
- ุซุจุช ุชุงุฑุฎ `reviewed_at`

### ุฑุฏ ูุดุงุฑฺฉุช

```http
POST /contributions/<id>/reject
Content-Type: application/x-www-form-urlencoded

reason=ุฏูู ุฑุฏ
```

**ุนููุงุช:**
- ุชุบุฑ ูุถุนุช ุจู `rejected`
- ุซุจุช ุฏูู ุฏุฑ `admin_response`

### ุชุบุฑ ูุถุนุช

```http
POST /contributions/<id>/update-status
Content-Type: application/x-www-form-urlencoded

status=in_progress
```

**ูุถุนุชโูุง ูุนุชุจุฑ:**
- pending, under_review, approved, in_progress, completed, rejected

**ุนููุงุช ุงุชููุงุชฺฉ:**
- `in_progress`: ุงุนุทุง 75 ุงูุชุงุฒ
- `completed`: ุงุนุทุง 100 ุงูุชุงุฒ + ุซุจุช ุชุงุฑุฎ ุงุชูุงู

### ุงุฑุณุงู ูพุงุณุฎ

```http
POST /contributions/<id>/respond
Content-Type: application/x-www-form-urlencoded

response=ูุชู ูพุงุณุฎ
```

**ุนููุงุช:**
- ุฐุฎุฑู ูพุงุณุฎ ุฏุฑ `admin_response`
- ุซุจุช ุชุงุฑุฎ `response_date`

### ุชุนู ุงูููุช

```http
POST /contributions/<id>/priority
Content-Type: application/x-www-form-urlencoded

priority=urgent
```

**ุงูููุชโูุง ูุนุชุจุฑ:**
- low (โฌ๏ธ ูพุงู)
- medium (โก๏ธ ูุชูุณุท)
- high (โ๏ธ ุจุงูุง)
- urgent (๐ฅ ููุฑ)

### ุฌุฏูู ุงูุชุงุฒุงุช

```http
GET /leaderboard
```

**ูพุงุณุฎ:** ูุณุช 50 ุดูุฑููุฏ ุจุฑุชุฑ ุจุง ุงูุชุงุฒุ ุณุทุญุ ู ูุดุงูโูุง

---

## ๐จ ุฑุงุจุท ฺฉุงุฑุจุฑ ูพูู

### ุตูุญู ูุณุช ูุดุงุฑฺฉุชโูุง

**ูุณุฑ:** `/contributions`

**ูฺฺฏโูุง:**
- 4 ฺฉุงุฑุช ุขูุงุฑ (ฺฉูุ ุฏุฑ ุงูุชุธุงุฑุ ุฏุฑ ุญุงู ุงูุฌุงูุ ุงูุฌุงู ุดุฏู)
- ููุชุฑูุง ุฏุณุชูโุจูุฏ ู ูุถุนุช
- ูุฑุชุจโุณุงุฒ (ุฌุฏุฏุชุฑูุ ูุญุจูุจโุชุฑูุ ูพุฑุจุญุซโุชุฑู)
- ฺฉุงุฑุชโูุง ูุดุงุฑฺฉุช ุจุง:
  - ฺฉุฏ ูพฺฏุฑ
  - ููุน (ุงุฏู/ูุดฺฉู)
  - ูุถุนุช
  - ุนููุงู ู ุชูุถุญุงุช ฺฉูุชุงู
  - ุฏุณุชูโุจูุฏ ู ุงูููุช
  - ุขูุงุฑ (ุฑุงุ ูุธุฑุ ุจุงุฒุฏุฏ)
  - ุงุทูุงุนุงุช ุงุฑุณุงูโฺฉููุฏู

### ุตูุญู ุฌุฒุฆุงุช ูุดุงุฑฺฉุช

**ูุณุฑ:** `/contributions/<id>`

**ูุณูุช ุงุตู:**
- ุงุทูุงุนุงุช ฺฉุงูู ูุดุงุฑฺฉุช
- ฺฏุงูุฑ ุชุตุงูุฑ (ุชุง 3 ุนฺฉุณ)
- ูููุนุช ูฺฉุงู + ููฺฉ ููุดู
- ุขูุงุฑ ฺฉุงูู
- ูพุงุณุฎ ูุฏุฑ (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
- ูุณุช ูุธุฑุงุช ุจุง ุณุงุฎุชุงุฑ ุฏุฑุฎุช (ูพุงุณุฎ ุจู ูพุงุณุฎ)

**ูพูู ฺฉูุงุฑ - ุนููุงุช ูุฏุฑุช:**
1. **ุชุบุฑ ูุถุนุช** - ุฏุฑุงูพโุฏุงูู ุจุง 6 ูุถุนุช
2. **ุนููุงุช ุณุฑุน** - ุฏฺฉููโูุง ุชุงุฏ/ุฑุฏ
3. **ุชุนู ุงูููุช** - 4 ุณุทุญ ุงูููุช
4. **ุงุฑุณุงู ูพุงุณุฎ** - ูุฑู ูพุงุณุฎ ุจู ุดูุฑููุฏ

### ุตูุญู ุฌุฏูู ุงูุชุงุฒุงุช

**ูุณุฑ:** `/leaderboard`

**ูุญุชูุง:**
- ุฌุฏูู 50 ููุฑ ุจุฑุชุฑ ุจุง:
  - ุฑุชุจู (ูุฏุงู ุจุฑุง 3 ููุฑ ุงูู)
  - ูุงู ู username
  - ุณุทุญ ุจุง ููุงุฏ
  - ุงูุชุงุฒ ฺฉู
  - ุชุนุฏุงุฏ ูุดุงุฑฺฉุชุ ุฑุงุ ูุธุฑ
  - ูุดุงูโูุง ฺฉุณุจ ุดุฏู
- ุฑุงูููุง ุณุทูุญ (9 ุณุทุญ)
- ุฑุงูููุง ฺฉุณุจ ุงูุชุงุฒ

---

## ๐ค ูพุงุฏูโุณุงุฒ ุฑุจุงุช ุชูฺฏุฑุงู (ุฏุฑ ุงูุชุธุงุฑ)

### ููู ุงุตู

ุจุงุฏ ุฏฺฉูู ุฌุฏุฏ ุงุถุงูู ุดูุฏ:

```python
[
    [KeyboardButton("๐ก ูุดุงุฑฺฉุช ูู"), KeyboardButton("๐ ูพุฑููุงู ูู")],
    # ... ุณุงุฑ ุฏฺฉููโูุง
]
```

### ุฏุณุชูุฑ `/contribute` ุง ุฏฺฉูู "๐ก ูุดุงุฑฺฉุช ูู"

```
๐ ูุดุงุฑฺฉุช ุดูุฑููุฏ

ุงุฒ ุทุฑู ุงู ุจุฎุด ูโุชูุงูุฏ:
๐ก ุงุฏูโูุง ุฎูุฏ ุจุฑุง ุจูุจูุฏ ุดูุฑ ุฑุง ุงุฑุณุงู ฺฉูุฏ
๐ฃ ูุดฺฉูุงุช ู ูุงุฒูุง ูุญูู ุฑุง ฺฏุฒุงุฑุด ุฏูุฏ
๐ ุจู ุงุฏูโูุง ุฏฺฏุฑุงู ุฑุง ุฏูุฏ
๐ฌ ูุธุฑุงุช ุฎูุฏ ุฑุง ุจููุณุฏ

๐ ุงูุชุงุฒ ุดูุง: 150
โญ ุณุทุญ ุดูุง: 3 (๐)
๐ ุฑุชุจู ุดูุง: 23

[ุงุฑุณุงู ุงุฏู] [ฺฏุฒุงุฑุด ูุดฺฉู] [ูุดุงูุฏู ุงุฏูโูุง] [ุฌุฏูู ุงูุชุงุฒุงุช]
```

### ูุฑุขูุฏ ุงุฑุณุงู ุงุฏู

```
State 1: ููุน ูุดุงุฑฺฉุช
๐ ฺู ฺฉุงุฑ ูโุฎูุงูุฏ ุงูุฌุงู ุฏูุฏุ

[๐ก ุงุฑุณุงู ุงุฏู] [๐ฃ ฺฏุฒุงุฑุด ูุดฺฉู]

---

State 2: ุงูุชุฎุงุจ ุฏุณุชูโุจูุฏ
๐ ูุทูุงู ุฏุณุชูโุจูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:

[๐ ุขููุฒุด] [๐ฅ ุจูุฏุงุดุช] [๐ ุชุฑุงูฺฉ]
[๐ก๏ธ ุงููุช] [๐ณ ูุญุท ุฒุณุช] [๐ญ ูุฑููฺฏ]
[๐๏ธ ุฒุฑุณุงุฎุช] [๐ฐ ุงูุชุตุงุฏ] [๐ค ุฑูุงู]
[๐ ุณุงุฑ]

---

State 3: ุนููุงู
โ๏ธ ุนููุงู ุงุฏู/ูุดฺฉู ุฎูุฏ ุฑุง ุจููุณุฏ:

(ุญุฏุงฺฉุซุฑ 200 ฺฉุงุฑุงฺฉุชุฑ)

[โ ุงูุตุฑุงู]

---

State 4: ุชูุถุญุงุช
๐ ุชูุถุญุงุช ฺฉุงูู ุฑุง ุจููุณุฏ:

(ุญุฏุงูู 20 ฺฉุงุฑุงฺฉุชุฑ)

[โ ุงูุตุฑุงู]

---

State 5: ุชุตูุฑ (ุงุฎุชุงุฑ)
๐ท ูโุชูุงูุฏ ุชุง 3 ุชุตูุฑ ุงุฑุณุงู ฺฉูุฏ:

[ุงุฑุณุงู ุชุตูุฑ] [ุจุฏูู ุชุตูุฑ ุงุฏุงูู ุจุฏู]

---

State 6: ูููุนุช (ุจุฑุง ฺฏุฒุงุฑุด ูุดฺฉู ุงุฌุจุงุฑ)
๐ ูููุนุช ูฺฉุงู ุฑุง ูุดุฎุต ฺฉูุฏ:

[ุงุฑุณุงู ูููุนุช GPS] [ููุดุชู ุขุฏุฑุณ]
[ุจุฏูู ูููุนุช] (ููุท ุจุฑุง ุงุฏู)

---

State 7: ุชุงุฏ ููุง
โ ุงุทูุงุนุงุช ุดูุง:

๐ ููุน: ุงุฏู
๐ท๏ธ ุฏุณุชู: ุชุฑุงูฺฉ
๐ ุนููุงู: ุงุญุฏุงุซ ูพู ุนุงุจุฑ ูพุงุฏู
๐ฌ ุชูุถุญุงุช: ...
๐ท ุชุตูุฑ: 2 ุนฺฉุณ
๐ ูููุนุช: ุฎุงุจุงู ุขุฒุงุฏ

[โ ุงุฑุณุงู] [โ๏ธ ูุฑุงุด] [โ ุงูุตุฑุงู]

---

State 8: ููููุช
๐ ูุดุงุฑฺฉุช ุดูุง ุจุง ููููุช ุซุจุช ุดุฏ!

๐ ฺฉุฏ ูพฺฏุฑ: IDEA-1042

+10 ุงูุชุงุฒ ุฏุฑุงูุช ฺฉุฑุฏุฏ!
ุงูุชุงุฒ ฺฉู: 160

ุงู ุงุฏู ุชูุณุท ุชู ุจุฑุฑุณ ู ุฏุฑ ุตูุฑุช ุชุงุฏุ ุจู ุดูุง 50 ุงูุชุงุฒ ุงุถุงู ุชุนูู ูโฺฏุฑุฏ.

[ูุดุงูุฏู ูุดุงุฑฺฉุชโูุง ูู] [ุจุงุฒฺฏุดุช ุจู ููู]
```

### ููุงุด ูุณุช ุงุฏูโูุง

```
๐ ุงุฏูโูุง ูุญุจูุจ

1๏ธโฃ ุงุญุฏุงุซ ูพู ุนุงุจุฑ ูพุงุฏู
   ๐ณ๏ธ 234 ุฑุง | ๐ฌ 45 ูุธุฑ | ๐ 1.2K ุจุงุฒุฏุฏ
   ๐ IDEA-1042 | โณ ุฏุฑ ุญุงู ุจุฑุฑุณ

2๏ธโฃ ูพุงุฑฺฉ ุจุงุฒ ฺฉูุฏฺฉุงู ุฏุฑ ูุญูู
   ๐ณ๏ธ 189 ุฑุง | ๐ฌ 32 ูุธุฑ | ๐ 980 ุจุงุฒุฏุฏ
   ๐ IDEA-1038 | โ ุชุงุฏ ุดุฏู

[๐ ุฑุง ุจุฏู] [๐ฌ ูุธุฑ ุจุฏู] [๐ ุฌุณุชุฌู]
```

### ูพฺฏุฑ ุจุง ฺฉุฏ

```
๐ ุฌุณุชุฌู ูุดุงุฑฺฉุช

ฺฉุฏ ูพฺฏุฑ ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
(ูุซุงู: IDEA-1042 ุง RPT-2015)

[โ ุงูุตุฑุงู]

---

๐ ูุชุฌู ุฌุณุชุฌู

ฺฉุฏ: IDEA-1042
ุนููุงู: ุงุญุฏุงุซ ูพู ุนุงุจุฑ ูพุงุฏู
ูุถุนุช: ๐ ุฏุฑ ุญุงู ุงูุฌุงู

โ ุจุฑุฑุณ ุดุฏ (3 ุฑูุฒ ูพุด)
โ ุชุงุฏ ุดุฏ (2 ุฑูุฒ ูพุด)
๐ ุนููุงุช ุขุบุงุฒ ุดุฏ (ุงูุฑูุฒ)

๐ฌ ูพุงุณุฎ ูุงูุฒุฏ:
"ุงุฏู ุนุงู ุงุณุช! ุชู ุนูุฑุงู ูุง ุฏุฑ ุญุงู ุจุฑุฑุณ ุฌุงููุง ูุณุชูุฏ..."

ุงูุชุงุฒ ฺฉุณุจ ุดุฏู: 10 + 50 + 75 = 135 ุงูุชุงุฒ
ุงูุชุงุฒ ุจุงูโูุงูุฏู: 100 (ุฏุฑ ุตูุฑุช ุงุชูุงู)

[๐ ุฑุง ุจุฏู] [๐ฌ ูุธุฑ ุจฺฏุฐุงุฑ] [โ๏ธ ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ]
```

---

## ๐ ูุงูโูุง ูพุงุฏูโุณุงุฒ ุดุฏู

### 1. `database/models.py`
**ุฎุทูุท 746+**: 4 ูุฏู ุฌุฏุฏ

```python
# CitizenContribution - ูุฏู ุงุตู ูุดุงุฑฺฉุชโูุง
# ContributionVote - ุฑุงโูุง
# ContributionComment - ูุธุฑุงุช
# CitizenProfile - ูพุฑููุงู ุดูุฑููุฏุงู
```

### 2. `candidate_panel/app.py`
**ุฎุทูุท 16-21**: Import ูุฏูโูุง ุฌุฏุฏ

**ุฎุทูุท 1315+**: 9 ุฑูุช ู 4 ุชุงุจุน ฺฉูฺฉ

```python
# Helper Functions
- generate_tracking_code()
- award_points()
- calculate_level()
- check_and_award_badges()

# Routes
- /contributions
- /contributions/<id>
- /contributions/<id>/approve
- /contributions/<id>/reject
- /contributions/<id>/update-status
- /contributions/<id>/respond
- /contributions/<id>/priority
- /leaderboard
```

### 3. `templates/candidate/contributions.html`
ุตูุญู ูุณุช ุจุง ููุชุฑุ ุขูุงุฑุ ู ฺฉุงุฑุชโูุง

### 4. `templates/candidate/contribution_detail.html`
ุตูุญู ุฌุฒุฆุงุช ุจุง ุชูุงู ูุงุจูุชโูุง ูุฏุฑุช

### 5. `templates/candidate/leaderboard.html`
ุฌุฏูู ุงูุชุงุฒุงุช ุจุง ุฑุงูููุง

### 6. `templates/candidate/dashboard.html`
**ุฎุท 64**: ุขุชู ููู "ูุดุงุฑฺฉุช ุดูุฑููุฏ" ุงุถุงูู ุดุฏ

### 7. `static/uploads/contributions/`
ูพูุดู ุขูพููุฏ ุชุตุงูุฑ ูุดุงุฑฺฉุชโูุง ุงุฌุงุฏ ุดุฏ

---

## ๐ ูุฑุงุญู ุจุนุฏ (Next Steps)

### ูุงุฒ 1: ูพุงุฏูโุณุงุฒ ุฑุจุงุช (2-3 ุฑูุฒ) ๐ด ุงูููุช ุจุงูุง

1. **Conversation Handler ุจุฑุง ุงุฑุณุงู ุงุฏู**
   - 7 state ุจุฑุง ูุฑุงุญู ุงุฑุณุงู
   - ุฐุฎุฑู ูููุช ุฏุฑ user_data
   - ููุฏุดู ูุฑูุฏโูุง
   - ุขูพููุฏ ุชุตูุฑ (ุชุง 3 ุนฺฉุณ)

2. **Conversation Handler ุจุฑุง ฺฏุฒุงุฑุด ูุดฺฉู**
   - ูุดุงุจู ุงุฏู ุจุง ุงุฌุจุงุฑ ุจูุฏู ูููุนุช
   - ุฏุฑุงูุช GPS location
   - ุชุจุฏู ุจู ุขุฏุฑุณ ุจุง Reverse Geocoding

3. **ุฏุณุชูุฑุงุช ูุดุงูุฏู**
   - ูุณุช ุงุฏูโูุง ูุญุจูุจ
   - ูุณุช ูุดุงุฑฺฉุชโูุง ุฎูุฏู
   - ูพฺฏุฑ ุจุง ฺฉุฏ
   - ุฌุฏูู ุงูุชุงุฒุงุช

4. **ุณุณุชู ุฑุงโุฏู**
   - Inline keyboard ุฒุฑ ูุฑ ุงุฏู
   - ุจุฑุฑุณ ุฑุง ุชฺฉุฑุงุฑ
   - ุจูโุฑูุฒุฑุณุงู ุดูุงุฑูุฏู
   - ุงุนุทุง ุงูุชุงุฒ

5. **ุณุณุชู ูุธุฑุงุช**
   - ูุฑู ุงุฑุณุงู ูุธุฑ
   - ููุงุด ูุธุฑุงุช
   - ูพุงุณุฎ ุจู ูุธุฑ (threading)

6. **ุงุนูุงูโูุง**
   - ุชุงุฏ/ุฑุฏ ูุดุงุฑฺฉุช
   - ุชุบุฑ ูุถุนุช
   - ูพุงุณุฎ ูุงูุฒุฏ
   - ุงุฑุชูุง ุณุทุญ
   - ุฏุฑุงูุช ูุดุงู

### ูุงุฒ 2: ุจูููโุณุงุฒ (1-2 ุฑูุฒ) ๐ก ุงูููุช ูุชูุณุท

1. **ูุญุฏูุฏุชโูุง**
   - 5 ูุดุงุฑฺฉุช ุฏุฑ ุฑูุฒ (ุงุฒ ูุฑ ููุน)
   - ุญุฏุงูู 20 ฺฉุงุฑุงฺฉุชุฑ ุชูุถุญุงุช
   - ุญุฏุงฺฉุซุฑ 3 ุชุตูุฑ
   - Rate limiting ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุณูพู

2. **Cache**
   - Cache ฺฉุฑุฏู ูุณุช ุงุฏูโูุง ูุญุจูุจ (5 ุฏููู)
   - Cache ุฌุฏูู ุงูุชุงุฒุงุช (10 ุฏููู)
   - Invalidate ฺฉุฑุฏู ุจุง ุชุบุฑุงุช

3. **ูพุฌูุดู**
   - ุตูุญูโุจูุฏ ูุณุช ุงุฏูโูุง (10 ุชุง ุฏุฑ ุตูุญู)
   - InlineKeyboard ุจุฑุง ุตูุญุงุช

### ูุงุฒ 3: ูฺฺฏโูุง ูพุดุฑูุชู (2-3 ุฑูุฒ) ๐ข ุงูููุช ูพุงู

1. **ุตูุญู ูพุฑููุงู ุฏุฑ ูพูู**
   - ููุงุด ุชูุงู ูุดุงุฑฺฉุชโูุง ฺฉ ฺฉุงุฑุจุฑ
   - ุขูุงุฑ ฺฉุงูู ฺฉุงุฑุจุฑ
   - ุชุงุฑุฎฺู ูุนุงูุช

2. **ุขูุงูุชฺฉุณ**
   - ูููุฏุงุฑ ูุดุงุฑฺฉุชโูุง ุฏุฑ ุทูู ุฒูุงู
   - ูุญุจูุจโุชุฑู ุฏุณุชูโุจูุฏโูุง
   - ูุฑุฎ ุชุงุฏ/ุฑุฏ
   - ูุนุงูโุชุฑู ฺฉุงุฑุจุฑุงู

3. **Export**
   - ุฎุฑูุฌ Excel ุงุฒ ูุดุงุฑฺฉุชโูุง
   - ฺฏุฒุงุฑุด PDF

4. **ููุชูฺฉุดู ุจู ููู**
   - ุงุนูุงู ุชุงุฏ ู ุดุฑูุน ุงุฌุฑุง ุงุฏู ุจู ููู (broadcast)
   - ุงุนูุงู ุงุชูุงู ุงุฏู

### ูุงุฒ 4: ุชุณุช ู ุฏูพูู (1-2 ุฑูุฒ) ๐ด ุงูููุช ุจุงูุง

1. **ุชุณุช ููุช**
   - ุชุณุช ุชูุงุจุน ฺฉูฺฉ
   - ุชุณุช ูุญุงุณุจู ุงูุชุงุฒ
   - ุชุณุช ุงุฑุชูุง ุณุทุญ

2. **ุชุณุช ฺฉูพุงุฑฺู**
   - ุชุณุช ูุฑุขูุฏ ฺฉุงูู ุงุฑุณุงู ุงุฏู
   - ุชุณุช ุฑุงโุฏู
   - ุชุณุช ูุธุฑุงุช

3. **ุชุณุช UI**
   - ฺฺฉ ฺฉุฑุฏู RTL
   - ุชุณุช ุฏุฑ ููุจุงู
   - ุชุณุช ููุชุฑูุง

4. **ุฏูพูู**
   - ูุงฺฏุฑุดู ุฏุชุงุจุณ
   - ุฑุงูโุงูุฏุงุฒ ุฑุจุงุช
   - ูุงูุชูุฑูฺฏ

---

## ๐ง ุชูุธูุงุช ููุฑุฏ ูุงุฒ

### ุฏุชุงุจุณ

ุจุฑุง ุงุนูุงู ุชุบุฑุงุช ุฏุชุงุจุณ:

```python
# ุฏุฑ ุชุฑููุงู
python

from candidate_panel.app import app, db
with app.app_context():
    db.create_all()
```

ุง ุงฺฏุฑ migration ุฏุงุฑุฏ:

```bash
flask db migrate -m "Add citizen participation models"
flask db upgrade
```

### ุฑุจุงุช ุชูฺฏุฑุงู

ุฏุฑ `bot_engine/telegram_bot.py` ุจุงุฏ ุงุถุงูู ุดูุฏ:

```python
from database.models import (
    CitizenContribution, ContributionVote, 
    ContributionComment, CitizenProfile
)

# Handlers
contribution_handler = ConversationHandler(...)
application.add_handler(contribution_handler)
```

### ูุชุบุฑูุง ูุญุท

```bash
# .env ุง config/settings.py
MAX_CONTRIBUTIONS_PER_DAY=5
MIN_DESCRIPTION_LENGTH=20
MAX_IMAGES_PER_CONTRIBUTION=3
CONTRIBUTION_IMAGE_SIZE_LIMIT=5242880  # 5MB
```

---

## ๐ก ูฺฉุงุช ููู

### 1. ุงููุช
- **SQL Injection**: ุงุณุชูุงุฏู ุงุฒ ORM SQLAlchemy ุฌููฺฏุฑ ูโฺฉูุฏ
- **XSS**: Jinja2 ุฎูุฏฺฉุงุฑ escape ูโฺฉูุฏ
- **CSRF**: ุจุฑุง ูุฑูโูุง ุจุงุฏ Flask-WTF ุงุณุชูุงุฏู ุดูุฏ
- **ุขูพููุฏ ูุงู**: ฺฺฉ ฺฉุฑุฏู ููุน ู ุณุงุฒ ูุงู ุถุฑูุฑ ุงุณุช

### 2. ููุงุณโูพุฐุฑ
- **Index**ูุง: ุฑู `candidate_id`, `status`, `category` index ุจุฒูุฏ
- **Pagination**: ุจุฑุง ูุณุชโูุง ุจุฒุฑฺฏ
- **Cache**: Redis ุจุฑุง cache ฺฉุฑุฏู ูุณุชโูุง ูุญุจูุจ
- **Queue**: Celery ุจุฑุง ูพุฑุฏุงุฒุด ุงุนูุงูโูุง

### 3. ุชุฌุฑุจู ฺฉุงุฑุจุฑ
- **Feedback**: ููุดู ูพุงู ููููุช/ุฎุทุง ูุดุงู ุฏูุฏ
- **Loading**: ุจุฑุง ุนููุงุช ุทููุงู loading ูุดุงู ุฏูุฏ
- **Validation**: ููุฏุดู ุฏุฑ ุณูุช ฺฉูุงูุช ู ุณุฑูุฑ
- **Accessibility**: ุงุณุชูุงุฏู ุงุฒ ููุงุฏูุง + ูุชู

### 4. ูฺฏูุฏุงุฑ
- **Logging**: ุชูุงู ุนููุงุช ููู ูุงฺฏ ุดููุฏ
- **Monitoring**: ูุงูุชูุฑ ฺฉุฑุฏู ุชุนุฏุงุฏ ูุดุงุฑฺฉุชโูุง
- **Backup**: ุจฺฉุงูพ ููุธู ุฏุชุงุจุณ
- **Documentation**: ูุณุชูุฏุณุงุฒ ุชุบุฑุงุช

---

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:

1. ฺฺฉ ฺฉุฑุฏู ูุงฺฏโูุง Flask: `candidate_panel/app.log`
2. ฺฺฉ ฺฉุฑุฏู ูุงฺฏโูุง ุฑุจุงุช: `bot_engine/bot.log`
3. ุจุฑุฑุณ ุฏุชุงุจุณ ุจุง SQLite Browser
4. ุชุณุช API endpoints ุจุง Postman

---

## ๐ ุขูุงุฑ ูพุงุฏูโุณุงุฒ

- **ุฎุทูุท ฺฉุฏ ููุดุชู ุดุฏู**: ~1,500
- **ูุงูโูุง ุงุฌุงุฏ/ุชุบุฑ ุดุฏู**: 7
- **ูุฏูโูุง ุฏุชุงุจุณ**: 4
- **API Endpoints**: 8
- **ูุงูุจโูุง HTML**: 3
- **ุชูุงุจุน ฺฉูฺฉ**: 4
- **ุฒูุงู ูพุงุฏูโุณุงุฒ**: ~6 ุณุงุนุช (ุจฺฉโุงูุฏ + ูพูู)
- **ุฒูุงู ุชุฎูู ุฑุจุงุช**: ~16 ุณุงุนุช

---

## โ Checklist ุชฺฉูู

### ุจฺฉโุงูุฏ ู ูพูู โ
- [x] ูุฏูโูุง ุฏุชุงุจุณ
- [x] ุฑูุชโูุง REST
- [x] ุชูุงุจุน ฺฉูฺฉ (ุงูุชุงุฒุ ุณุทุญุ ูุดุงู)
- [x] ูุงูุจโูุง HTML
- [x] ููุชุฑ ู ูุฑุชุจโุณุงุฒ
- [x] ุนููุงุช ูุฏุฑุช (ุชุงุฏุ ุฑุฏุ ูพุงุณุฎุ ุงูููุช)
- [x] ุฌุฏูู ุงูุชุงุฒุงุช
- [x] ุขูุงุฑ ู ฺฏุฒุงุฑุด
- [x] ููู ูุงูุจุฑ

### ุฑุจุงุช ุชูฺฏุฑุงู โณ
- [ ] ููู ุงุตู ุจุง ุฏฺฉูู ูุดุงุฑฺฉุช
- [ ] Conversation Handler ุงุฑุณุงู ุงุฏู
- [ ] Conversation Handler ฺฏุฒุงุฑุด ูุดฺฉู
- [ ] ุขูพููุฏ ุชุตูุฑ
- [ ] ุฏุฑุงูุช ูููุนุช GPS
- [ ] ุณุณุชู ุฑุงโุฏู
- [ ] ุณุณุชู ูุธุฑุงุช
- [ ] ูุณุช ุงุฏูโูุง ูุญุจูุจ
- [ ] ูพฺฏุฑ ุจุง ฺฉุฏ
- [ ] ูพุฑููุงู ู ุขูุงุฑ ุดุฎุต
- [ ] ุงุนูุงูโูุง

### ุชุณุช ู ุฏูพูู โณ
- [ ] ุชุณุช ููุช
- [ ] ุชุณุช ฺฉูพุงุฑฺู
- [ ] ุชุณุช UI (ููุจุงู/ุฏุณฺฉุชุงูพ)
- [ ] ูุงฺฏุฑุดู ุฏุชุงุจุณ
- [ ] ุฏูพูู ูพุฑูุฏุงฺฉุดู
- [ ] ูุณุชูุฏุงุช ููุง

---

**ุชุงุฑุฎ ุจูโุฑูุฒุฑุณุงู**: 2024
**ูุณุฎู**: 1.0.0
**ูุถุนุช**: ุจฺฉโุงูุฏ ู ูพูู ฺฉุงูู โ | ุฑุจุงุช ุฏุฑ ุงูุชุธุงุฑ ูพุงุฏูโุณุงุฒ โณ
